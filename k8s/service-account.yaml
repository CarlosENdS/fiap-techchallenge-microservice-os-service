apiVersion: v1
kind: ServiceAccount
metadata:
  name: os-service-sa
  namespace: os-service
  annotations:
    # EKS IRSA (IAM Roles for Service Accounts)
    # Replace ACCOUNT_ID and OIDC_PROVIDER with your actual values
    eks.amazonaws.com/role-arn: "arn:aws:iam::ACCOUNT_ID:role/os-service-role"
---
# IAM Policy required for the role (create in AWS Console/CLI):
# {
#   "Version": "2012-10-17",
#   "Statement": [
#     {
#       "Effect": "Allow",
#       "Action": [
#         "sqs:SendMessage",
#         "sqs:ReceiveMessage",
#         "sqs:DeleteMessage",
#         "sqs:GetQueueAttributes",
#         "sqs:GetQueueUrl"
#       ],
#       "Resource": [
#         "arn:aws:sqs:us-east-1:ACCOUNT_ID:os-order-events-queue.fifo",
#         "arn:aws:sqs:us-east-1:ACCOUNT_ID:quote-approved-queue",
#         "arn:aws:sqs:us-east-1:ACCOUNT_ID:execution-completed-queue",
#         "arn:aws:sqs:us-east-1:ACCOUNT_ID:payment-failed-queue",
#         "arn:aws:sqs:us-east-1:ACCOUNT_ID:resource-unavailable-queue"
#       ]
#     }
#   ]
# }
